<!DOCTYPE html>

<head>
  <link rel="stylesheet" type="text/css" href="style.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="images/violet.png" rel="shortcut icon">
  <title>Test Website - Contact</title>
</head>

<body>

  <div class="header">
    <div style="text-align: center; padding-bottom: 0.5;">
      <a href="index.html" style="user-select: none;"><img src="images/violet.png" style="width: 5%; height: 5%;"></a>
      <h1>MTU Timetable</h1>
    </div>
    <div class="header-right" style="padding-top: 0%;">
      <a href="index.html">Home</a>
      <a href="timetable.html">Timetable</a>
      <a class="active" href="#contact">Contact</a>
    </div>
  </div>

  <div class="block-contact glow">
    <div class="container-input form">
      <form name="ContactInfo" id="contactform" onsubmit="required()">

        <h2 class="rainbow container" style="tab-size: 50px;">Contact Us </h2>

        <label for="fname">First Name</label>
        <input type="text" id="fname" name="firstname" placeholder="Enter your first name"><br>

        <label for="lname">Last Name</label>
        <input type="text" id="lname" name="lastname" placeholder="Enter your last name"><br>

        <label for="email">Email Address</label><br>
        <input type="email" id="email" name="email" pattern="[^ @]*@[^ @]*" placeholder="Enter your email"><br>

        <label for="title">Title</label>
        <select id="title" name="title">
          <option value="" disabled selected>Please choose one..</option>
          <option value="mr">Mr</option>
          <option value="ms">Ms</option>
          <option value="mrs">Mrs</option>
          <option value="other">Other</option>
        </select><br>

        <label for="subject">Subject</label>
        <textarea id="subject" name="subject" placeholder="Write something.." style="height:200px"></textarea><br>

        <button type="button" class="button rainbow-small" id="submitButton" value="Submit">Submit</button>

      </form>
    </div>
  </div>

      <script src="https://www.gstatic.com/firebasejs/7.5.2/firebase-app.js"></script>
      <script src="https://www.gstatic.com/firebasejs/7.5.2/firebase-firestore.js"></script>
      <script type="module">
        var config = {
          apiKey: "AIzaSyD3Vafq07XrPdcMtMr26MZzPnBWTynLqtg",
          authDomain: "violet-team.firebaseapp.com",
          projectId: "violet-team",
          storageBucket: "violet-team.appspot.com",
          messagingSenderId: "773458989236",
          appId: "1:773458989236:web:e472340505f3c50b6d07e1",
          measurementId: "G-57DLDBZZG7"
        };
        
        var app = firebase.initializeApp(config);
        const db = app.firestore();

        const FirstnameInput = document.querySelector('#fname');
        const LastnameInput = document.querySelector('#lname');
        const EmailInput = document.querySelector('#email');
        const TitleInput = document.querySelector('#title');
        const SubjectInput = document.querySelector('#subject');

        submitButton.addEventListener("click", function () {
          {
            var FirstNameEmpty = document.forms["ContactInfo"]["firstname"].value;
            var LastNameEmpty = document.forms["ContactInfo"]["lastname"].value;
            var EmailEmpty = document.forms["ContactInfo"]["email"].value;
            var TitleEmpty = document.forms["ContactInfo"]["title"].value;
            var SubjectEmpty = document.forms["ContactInfo"]["subject"].value;

            if (FirstNameEmpty == "" || FirstNameEmpty == " ") {
              alert("Please input a value for First Name!");
              return false;
            }
            function hasNumber(StringtoCheck) {
              return /\d/.test(StringtoCheck);
            }
            if (hasNumber(FirstNameEmpty) === true) {
              alert("Please input a valid First Name!");
              return false;
            }



            if (LastNameEmpty == "" || LastNameEmpty == " ") {
              alert("Please input a value for Last Name!");
              return false;
            }
            if (hasNumber(LastNameEmpty) === true) {
              alert("Please input a valid Last Name!");
              return false;
            }



            if (EmailEmpty == "" || EmailEmpty == " ") {
              alert("Please input a value for Email Address!");
              return false;
            }
            function validMail(EmailEmpty) {
              return /\S+@\S+\.\S+/.test(EmailEmpty);
            }
            if (validMail(EmailEmpty) === false) {
              alert("Please input a valid Email Address!");
              return false;
            }


            if (TitleEmpty == "" || TitleEmpty == " ") {
              alert("Please input a value for Title!");
              return false;
            }

            if (SubjectEmpty == "" || SubjectEmpty == " ") {
              alert("Please input a value for Subject!");
              return false;
            }

            else {
              console.log("Data input successfully");
            }
          }

          const FirstName = FirstnameInput.value;
          const LastName = LastnameInput.value;
          const email = EmailInput.value;
          const title = TitleInput.value;
          const subject = SubjectInput.value;


          const docRef = db.collection("Contact-Form").doc(FirstName + ' ' + LastName + ' : ' + email);

          docRef.set({
            Firstname: FirstName,
            Lastname: LastName,
            Email: email,
            Title: title,
            Subject: subject
          })
            .then(function (docRef) {
              console.log("Document written successfully");
              alert("Data sent successfully, we will get back to your shortly!");
            })
            .catch(function (error) {
              console.error("Error adding document: ", error);
              alert("Error adding document, please try again later!");
            });
        });


      </script>

      <footer>
        <h2 style="text-align: center;">Violet team!</h2>
        <p style="text-align: center; padding-bottom: 1%;"><a href="mailto:violet.team@mycit.ie"
            style="cursor: pointer; color: white;">Email us! Violet.team@mycit.ie</a></p>
      </footer>

</body>

</html>